(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{3539:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/meetings",function(){return s(437)}])},2453:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=e=>{let t,s,{children:n}=e;return"change_request"===n||"pre_production"===n||"open"===n?(t="#FBEDD9",s="#885A00"):"pending"===n||"ongoing"===n||"in_dispute"===n||"Unverified"===n?(t="#FFE9E9",s="#B50000"):"cancelled"===n||"upcoming"===n?t="#E8E8E8":("rescheduled"===n||"completed"===n)&&(t="#E6FBD9"),(0,a.jsx)("div",{className:"inline rounded-2xl border border-solid px-3 py-2",style:{backgroundColor:t},children:(0,a.jsx)("p",{className:"inline capitalize",style:{color:s},children:n})})}},4379:function(e,t,s){"use strict";var a=s(7294);t.Z=e=>{let[t,s]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let t=(e=>{let t=new Date(e);console.log("\uD83D\uDE80 ~ makeDateFormat ~ date:",t);let s=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],a=t.getDate(),n=t.getFullYear(),l=t.getHours(),i=t.getMinutes(),d=l>=12?"pm":"am";l%=12,l=l||12;let c=l+":"+(i<10?"0":"")+i+" "+d,r="".concat(s," ").concat(a,", ").concat(n);return{date:r,time:c}})(e);s(t)},[e]),t}},437:function(e,t,s){"use strict";s.r(t);var a=s(5893),n=s(7294);s(4321);var l=s(9473),i=s(1467),d=s(1355),c=s(806),r=s(1163),o=s(3197),x=s(9078),m=s(2453),u=s(3317),h=s(4379),p=s(4246);t.default=()=>{var e,t;let[s,g]=(0,n.useState)(1),[v,f]=(0,n.useState)(1),[j,b]=(0,n.useState)([]),[N,w]=(0,n.useState)(""),[y,k]=(0,n.useState)({}),[_,D]=(0,n.useState)(!1),[M,E]=(0,n.useState)(!0),[S,A]=(0,n.useState)(!1),{userData:C}=(0,x.a)(),F=(0,l.I0)(),z=null==y?void 0:y.meeting_date_time,P=(0,h.Z)(z);(0,n.useEffect)(()=>{getAllMyMeetings()},[v]),(0,n.useEffect)(()=>{F((0,i.Iw)("Meetings"))},[]);let T=(0,n.useRef)(null),O={requested_by:"cp",requested_time:N},handleNext=async()=>{if(N){let e="".concat(o.QP,"meetings/schedule/").concat(null==y?void 0:y.id);try{let t=await fetch(e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!t.ok)throw Error("Network response was not ok");await t.json()}catch(e){console.log(e)}}},getAllMyMeetings=async()=>{try{let e=await fetch("".concat(o.QP,"meetings?sortBy=createdAt:desc&limit=10&page=").concat(v)),t=await e.json();g(null==t?void 0:t.totalPages),b(t.results)}catch(e){console.error(e)}};(0,r.useRouter)();let getMeetingDetails=async e=>{E(!0);try{let t=await fetch("".concat(o.QP,"meetings/").concat(e)),s=await t.json();s?(k(s),E(!1),A(!0),handleNext()):(D(!0),E(!1))}catch(e){console.error(e),E(!1)}};function makeDateFormat(e){let t=new Date(e),s=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],a=t.getDate(),n=t.getFullYear(),l=t.getHours(),i=t.getMinutes(),d=l>=12?"pm":"am";l%=12,l=l||12;let c=l+":"+(i<10?"0":"")+i+" "+d,r="".concat(s," ").concat(a,", ").concat(n);return{date:r,time:c}}return makeDateFormat("2024-05-29T21:00:00.000Z"),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-1",children:[(0,a.jsxs)("div",{className:"panel h-full w-full",children:[(0,a.jsx)("div",{className:"mb-5 flex items-center justify-between",children:(0,a.jsx)("h5",{className:"text-xl font-bold dark:text-white-light",children:"Meeting List"})}),(0,a.jsxs)("div",{className:"table-responsive",children:[(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"",children:[(0,a.jsx)("th",{className:"font-semibold text-[16px]",children:"Order Name"}),(0,a.jsx)("th",{className:"font-semibold text-[16px]",children:"Meeting Date / Time"}),(0,a.jsx)("th",{className:"font-semibold text-[16px]",children:"Attendings"}),(0,a.jsx)("th",{className:"ltr:rounded-r-md rtl:rounded-l-md font-semibold text-[16px]",children:"Status"}),(0,a.jsx)("th",{className:"font-semibold text-[16px]",children:"View"})]})}),(0,a.jsx)("div",{}),(0,a.jsx)("tbody",{children:null==j?void 0:j.map(e=>{var t,s,n,l,i,d,c,r;return(0,a.jsxs)("tr",{className:"group text-white-dark hover:text-black dark:hover:text-white-light/90",children:[(0,a.jsx)("td",{className:" min-w-[150px] text-black dark:text-white",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("p",{className:"whitespace-nowrap break-words",children:(null==e?void 0:null===(t=e.order)||void 0===t?void 0:t.name).length>10?null==e?void 0:null===(s=e.order)||void 0===s?void 0:s.name:"less than 10 character"})})}),(0,a.jsxs)("td",{children:[(0,a.jsxs)("span",{className:"ps-2",children:["Date:",null===(n=makeDateFormat(null==e?void 0:e.meeting_date_time))||void 0===n?void 0:n.date]}),(0,a.jsxs)("span",{className:"ps-2",children:["Time:",null===(l=makeDateFormat(null==e?void 0:e.meeting_date_time))||void 0===l?void 0:l.time]})]}),(0,a.jsx)("td",{children:(0,a.jsxs)("p",{className:"whitespace-nowrap",children:[null==e?void 0:null===(i=e.client)||void 0===i?void 0:i.name," with",(0,a.jsx)("span",{className:"ps-1",children:(null==e?void 0:null===(d=e.cps[1])||void 0===d?void 0:d.name)?null==e?void 0:null===(c=e.cps[1])||void 0===c?void 0:c.name:null==e?void 0:null===(r=e.cps[0])||void 0===r?void 0:r.name})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{children:(0,a.jsx)(m.Z,{children:null==e?void 0:e.meeting_status})})}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{type:"button",className:"p-0",onClick:()=>getMeetingDetails(e.id),children:(0,a.jsx)("img",{className:"ml-2 text-center",src:"/assets/images/eye.svg",alt:"view-icon"})})})]},e.id)})})]}),(0,a.jsx)("div",{className:"mt-4 flex justify-center md:justify-end lg:mr-5 2xl:mr-16",children:(0,a.jsx)(p.ZP,{current:v,total:s,onPageChange:e=>{f(e)},maxWidth:400})})]})]}),(0,a.jsx)(d.u,{appear:!0,show:S,as:n.Fragment,children:(0,a.jsx)(c.V,{as:"div",open:S,onClose:()=>A(!1),children:(0,a.jsx)("div",{className:"fixed inset-0 z-[999] overflow-y-auto bg-[black]/60",children:(0,a.jsx)("div",{className:"flex min-h-screen items-start justify-center md:px-4 ",children:(0,a.jsxs)(c.V.Panel,{as:"div",className:"panel my-24 w-2/5 overflow-hidden rounded-lg border-0 p-0 text-black dark:text-white-dark space-x-6",children:[(0,a.jsxs)("div",{className:"flex my-2 items-center justify-between bg-[#fbfbfb]  py-3 dark:bg-[#121c2c]",children:[(0,a.jsx)("div",{className:"text-[22px] font-bold capitalize leading-none text-[#000000] ms-6",children:"Meeting Details"}),(0,a.jsx)("button",{type:"button",className:"text-white-dark hover:text-dark me-4 text-[16px]",onClick:()=>A(!1),children:u.w.closeModalSvg})]}),(0,a.jsxs)("div",{className:"basis-[50%]",children:[(0,a.jsxs)("h2",{className:" text-[22px] font-bold capitalize leading-[28.6px] text-[#ACA686]",children:["Meeting with ",(0,a.jsx)("span",{className:"text-[#ACA686] capitalize",children:null==y?void 0:null===(e=y.client)||void 0===e?void 0:e.name})]}),(0,a.jsxs)("div",{className:"".concat((null==y?void 0:y.meeting_status)==="pending"&&"md:flex","  justify-between pb-6 w-5/6 space-y-6"),children:[(0,a.jsxs)("div",{className:"leftdata",children:[(0,a.jsx)("p",{children:(0,a.jsxs)("span",{className:"text-[14px] font-light leading-none capitalize text-[#000000] ",children:["Order : ",(0,a.jsx)("span",{className:"text-[14px] font-normal text-[#000000]",children:null==y?void 0:null===(t=y.order)||void 0===t?void 0:t.name})]})}),(0,a.jsx)("p",{className:"mt-2",children:(0,a.jsxs)("span",{className:"text-[14px] font-light leading-none capitalize text-[#000000]",children:["Time : ",(0,a.jsxs)("span",{className:"text-[14px] font-normal leading-[28px] text-[#000000]",children:[" ",null==P?void 0:P.time]})]})}),(0,a.jsx)("p",{children:(0,a.jsxs)("span",{className:"text-[14px] font-light leading-none capitalize text-[#000000]",children:["Date : ",(0,a.jsxs)("span",{className:"text-[14px] font-normal leading-[28px] text-[#000000]",children:[" ",null==P?void 0:P.date]})]})}),(0,a.jsxs)("div",{className:"flex justify-between mt-3",children:[(0,a.jsxs)("span",{className:" text-[14px] font-light leading-none capitalize text-[#000000]",children:["Status: ",(0,a.jsx)("span",{className:"ps-2 text-[#0E1726] font-normal",children:(0,a.jsx)(m.Z,{children:null==y?void 0:y.meeting_status})})]}),y.link?(0,a.jsxs)("span",{className:" block font-sans text-[14px] leading-[18.2px] text-[#000000]",children:["Link: ",y.link]}):""]})]}),(0,a.jsxs)("div",{children:[(null==y?void 0:y.meeting_status)==="pending"&&(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("h2",{className:"text-[14px] font-semibold capitalize leading-none text-[#000000]",children:"Reschedule Meeting"}),(0,a.jsxs)("form",{action:"",className:"flex flex-col",children:[(0,a.jsx)("input",{className:"rounded-[10px] border border-solid border-[#dddddd] bg-white px-[15px] py-[10px] font-sans text-[14px] font-medium leading-none text-[#000000] focus:border-[#dddddd] w-60",type:"datetime-local",name:"dateTime",id:"datetime",ref:T,onChange:()=>{let e=T.current.value,t=new Date(e),s=t.toISOString();w(s)}}),(0,a.jsx)("button",{type:"submit",className:"btn my-5 font-light bg-black font-sans text-white float-left w-60 capitalize text-[16px]",children:"Save date"})]})]}),(0,a.jsx)("button",{onClick:()=>A(!1),type:"submit",className:"btn bg-black font-sans text-white mx-auto md:me-0 mt-0 hidden md:block text-[16px]",children:"Close"})]})]})]})]})})})})})]})}}},function(e){e.O(0,[378,531,774,888,179],function(){return e(e.s=3539)}),_N_E=e.O()}]);