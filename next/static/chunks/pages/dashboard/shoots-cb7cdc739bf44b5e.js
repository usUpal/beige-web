(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{61948:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/shoots",function(){return r(34467)}])},24860:function(e,t,r){"use strict";var o=r(87066),s=r(63197);let l=o.Z.create({baseURL:s.ZP.APIEndpoint}),reqConfig=e=>({headers:{Authorization:"Bearer ".concat(e.idToken)}});t.Z={idToken:null,getFiles(e){try{return l.get("/get-files/".concat(e),reqConfig(this))}catch(e){throw console.error("Error in getFiles:",e),e}},async checkIsPublic(e){try{let t=await l.head(s.ZP.BucketUrl+e+"?bc_timestamp=".concat(new Date().getTime()));return t.ok||console.log("Bad"),200===t.status}catch(e){return console.error("Error in checkIsPublic:",e),!1}},setPublicOrPrivate(e,t){try{return l.post(t?"/set-public":"/set-private",{filepath:e},reqConfig(this))}catch(t){throw console.error("Error in setPublicOrPrivate for ".concat(e,":"),t),t}},async getSharableUrl(e,t){try{let r=await l.post("/get-share-url",{filepath:e,download:t},reqConfig(this));return r.data}catch(e){throw console.error("Error in getSharableUrl:",e),e}},addFolder(e){try{return l.post("/add-folder",{folderpath:e},reqConfig(this))}catch(t){throw console.error("Error in addFolder for ".concat(e,":"),t),t}},deleteFile(e){try{return l.post("/delete-file",{filepath:e},reqConfig(this))}catch(t){throw console.error("Error in deleteFile for ".concat(e,":"),t),t}},async moveFile(e,t){try{let r=await l.post("/move-file",{filepath:e,destination:t},reqConfig(this));return r.data}catch(r){throw console.error("Error in moveFile for ".concat(e," to ").concat(t,":"),r),r}},async getNewUploadPolicy(e,t,r){try{let o=await l.post("/get-new-upload-policy",{filepath:e,fileContentType:t,fileSize:r},reqConfig(this));return o.data}catch(t){throw console.error("Error in getNewUploadPolicy for ".concat(e,":"),t),t}},postFile(e,t,r){console.log("\uD83D\uDE80 ~ postFile ~ file:",t);try{let s=new FormData;for(let[t,r]of Object.entries(e.fields))s.append(t,r);s.append("file",t);let l=o.Z.CancelToken.source(),n=o.Z.post(e.url,s,{onUploadProgress:e=>r(e.loaded/e.total),cancelToken:l.token});return[n,()=>l.cancel()]}catch(e){throw console.error("Error in postFile:",e),e}},async getSettings(){try{let e=await l.get("/get-settings",reqConfig(this));return e.data.settings}catch(e){throw console.error("Error in getSettings:",e),e}},async saveSettings(e){try{let t=await l.post("/save-settings",{settings:e},reqConfig(this));return t.data}catch(e){throw console.error("Error in saveSettings:",e),e}},async downloadFolder(e){try{let t=await l.get("/download-folder?folderpath=".concat(encodeURIComponent(e)),{...reqConfig(this),responseType:"blob"}),r=new Blob([t.data],{type:"application/zip"}),o=window.URL.createObjectURL(r),s=document.createElement("a");s.style.display="none",s.href=o,s.download="".concat(e.split("/").pop(),".zip"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(o)}catch(t){throw console.error("Error in downloadFolder for ".concat(e,":"),t),t}}}},12453:function(e,t,r){"use strict";var o=r(85893);r(67294),t.Z=e=>{let t,r,{children:s}=e;return"change_request"===s||"pre_production"===s||"open"===s?(t="#FBEDD9",r="#885A00"):"pending"===s||"ongoing"===s||"in_dispute"===s||"Unverified"===s?(t="#FFE9E9",r="#B50000"):"cancelled"===s||"upcoming"===s?t="#E8E8E8":"rescheduled"===s||"completed"===s?t="#E6FBD9":"active"===s||"Active"===s?t="#DDF5F0":("inactive"===s||"InActive"===s)&&(t="#E7CF02"),(0,o.jsx)("div",{className:"inline rounded-2xl border border-solid px-3 py-2",style:{backgroundColor:t},children:(0,o.jsx)("p",{className:"inline capitalize",style:{color:r},children:s})})}},34467:function(e,t,r){"use strict";r.r(t);var o=r(85893),s=r(67294);r(64321);var l=r(9473),n=r(31467),a=r(12453),c=r(63197),i=r(39078),d=r(41664),h=r.n(d),u=r(24860),p=r(4246);t.default=()=>{let[e,t]=(0,s.useState)(1),[r,d]=(0,s.useState)(1),[m,g]=(0,s.useState)([]),{userData:x}=(0,i.a)();null==x||x.role,(0,s.useEffect)(()=>{getAllMyShoots()},[r]);let getAllMyShoots=async()=>{try{let e=await fetch("".concat(c.QP,"orders?sortBy=createdAt:desc&limit=10&page=").concat(r)),o=await e.json();console.log("\uD83D\uDE80 ~ getAllMyShoots ~ allShots:",o),t(null==o?void 0:o.totalPages),g(null==o?void 0:o.results)}catch(e){console.error(e)}},f=(0,l.I0)();return(0,s.useEffect)(()=>{f((0,n.Iw)("Shoots"))}),(0,o.jsx)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-1",children:(0,o.jsxs)("div",{className:"panel h-full w-full",children:[(0,o.jsx)("div",{className:"mb-5 flex items-center justify-between",children:(0,o.jsx)("h5",{className:"text-xl font-bold dark:text-white-light",children:"Recent Orders"})}),(0,o.jsxs)("div",{className:"table-responsive",children:[(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"text-[16px] font-semibold ltr:rounded-l-md rtl:rounded-r-md",children:"Order Name"}),(0,o.jsx)("th",{className:"text-[16px] font-semibold",children:"Order ID"}),(0,o.jsx)("th",{className:"text-[16px] font-semibold",children:"Price"}),(0,o.jsx)("th",{className:"text-[16px] font-semibold",children:"Files"}),(0,o.jsx)("th",{className:"ltr:rounded-r-md rtl:rounded-l-md",children:"Status"}),(0,o.jsx)("th",{className:"text-[16px] font-semibold",children:"View"})]})}),(0,o.jsx)("tbody",{children:null==m?void 0:m.map(e=>{var t;return(0,o.jsxs)("tr",{className:"group text-white-dark hover:text-black dark:hover:text-white-light/90",children:[(0,o.jsx)("td",{className:"min-w-[150px] text-black dark:text-white",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("img",{className:"h-8 w-8 rounded-md object-cover ltr:mr-3 rtl:ml-3",src:"/assets/images/ps.svg",alt:"avatar"}),(0,o.jsxs)("p",{className:"whitespace-nowrap",children:[null==e?void 0:e.order_name,(0,o.jsx)("span",{className:"block text-xs text-[#888EA8]",children:new Date(null==e?void 0:null===(t=e.shoot_datetimes[0])||void 0===t?void 0:t.start_date_time).toDateString()})]})]})}),(0,o.jsx)("td",{children:e.id}),(0,o.jsxs)("td",{children:["$ ",null==e?void 0:e.shoot_cost]}),(0,o.jsx)("td",{className:"text-success",children:(null==e?void 0:e.file_path)&&(0,o.jsx)("p",{onClick:async()=>{await u.Z.downloadFolder("".concat(e.order_name,"/"))},children:"Download file"})}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{className:"",children:(0,o.jsx)(a.Z,{children:null==e?void 0:e.order_status})})}),(0,o.jsx)("td",{children:(0,o.jsx)(h(),{href:"shoots/".concat(null==e?void 0:e.id),children:(0,o.jsx)("button",{type:"button",className:"p-0",children:(0,o.jsx)("img",{className:"ml-2 text-center",src:"/assets/images/eye.svg",alt:"view-icon"})})})})]},e.id)})})]}),(0,o.jsx)("div",{className:"mt-4 flex justify-center md:justify-end lg:mr-5 2xl:mr-16",children:(0,o.jsx)(p.ZP,{current:r,total:e,onPageChange:e=>{d(e)},maxWidth:400})})]})]})})}}},function(e){e.O(0,[531,764,66,774,888,179],function(){return e(e.s=61948)}),_N_E=e.O()}]);